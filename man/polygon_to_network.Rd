% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/polygons_to_network.R
\name{polygon_to_network}
\alias{polygon_to_network}
\title{Create a Spatial Network from Polygon Geometries}
\usage{
polygon_to_network(polygons, min_shared_length = 0, connect_islands = TRUE)
}
\arguments{
\item{polygons}{An sf object containing polygon geometries. Each polygon will become
a node in the resulting network. If the object contains an 'id' column, these values
will be preserved as vertex attributes in the graph.}

\item{min_shared_length}{Numeric. Minimum length of shared boundary required for two
polygons to be considered neighbors. Currently not implemented in the function body.
Default is 0 (all touching polygons are connected regardless of shared boundary length).}

\item{connect_islands}{Logical. If TRUE, disconnected components in the network will be
connected using the connect_components() helper function. This is useful for ensuring
a fully connected network even when some polygons are spatially isolated. Default is TRUE.}
}
\value{
A list with three elements:
\describe{
\item{graph}{An igraph object representing the spatial network. Nodes correspond to
polygons and edges represent spatial contiguity.}
\item{polygons}{The original sf polygon object passed to the function.}
\item{edge_data}{A data frame with columns 'from' and 'to' indicating connected
polygon pairs (using 1-based indices).}
}
}
\description{
This function constructs an igraph network object from polygon geometries based on
spatial contiguity. Polygons that share boundaries become connected nodes in the network.
The function uses the spdep package for efficient neighbor detection and can optionally
connect disconnected components (islands) using spatial proximity.
}
\details{
The function uses Queen contiguity (polygons sharing any boundary point are neighbors)
implemented via spdep::poly2nb(). A small snap tolerance (1e-6) is applied to handle
minor topological inconsistencies in the polygon geometries.

The resulting graph is undirected, as spatial contiguity is inherently symmetric.
If the input polygons contain an 'id' column, these identifiers are stored as the
'polygon_id' vertex attribute in the graph.

When connect_islands = TRUE and disconnected components are detected, the function
calls connect_components() to add edges between components (implementation not shown here).
}
\note{
The min_shared_length parameter is defined but not currently used in filtering
neighbors. Future implementations may use this to require a minimum boundary length
before considering polygons as neighbors.
}
\examples{
\dontrun{
library(sf)
# Create a simple polygon dataset
polys <- st_read("my_polygons.shp")

# Create network with default settings
network <- polygon_to_network(polys)

# Access the graph
plot(network$graph)

# Create network without connecting islands
network_islands <- polygon_to_network(polys, connect_islands = FALSE)
}

}
\seealso{
\code{\link[spdep]{poly2nb}} for neighbor detection,
\code{\link[igraph]{graph_from_data_frame}} for graph construction
}
